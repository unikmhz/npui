!function(e){if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else{if(!jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if(!moment)throw"bootstrap-datetimepicker requires moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){if("undefined"==typeof t)throw alert("momentjs is requried"),new Error("momentjs is required");var i=0,a=t,n=function(t,n){var o={pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,minuteStepping:1,startDate:new a({y:1970}),endDate:(new a).add(50,"y"),collapse:!0,language:a.lang(),defaultDate:"",disabledDates:[],enabledDates:!1,icons:{},useStrict:!1},s={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},d=this,r=function(){var r,p,l,m=!1;if(d.options=e.extend({},o,n),d.options.icons=e.extend({},s,d.options.icons),d.element=e(t),c(),!d.options.pickTime&&!d.options.pickDate)throw new Error("Must choose at least one picker");if(d.id=i++,a.lang(d.options.language),d.date=a(),d.unset=!1,d.isInput=d.element.is("input"),d.component=!1,d.element.hasClass("input-group")&&(d.component=0==d.element.find(".datepickerbutton").size()?d.element.find("[class^='input-group-']"):d.element.find(".datepickerbutton")),d.format=d.options.format,l=a()._lang._longDateFormat,d.format||(d.format=d.isInput?d.element.data("format"):d.element.find("input").data("format"),d.format||(d.format=d.options.pickDate?l.L:"",d.options.pickDate&&d.options.pickTime&&(d.format+=" "),d.format+=d.options.pickTime?l.LT:"",d.options.useSeconds&&(~l.LT.indexOf(" A")?d.format=d.format.split(" A")[0]+":ss A":d.format+=":ss"))),d.options.use24hours=d.format.toLowerCase().indexOf("a")<1,d.component&&(m=d.component.find("span")),d.options.pickTime&&m&&m.addClass(d.options.icons.time),d.options.pickDate&&m&&(m.removeClass(d.options.icons.time),m.addClass(d.options.icons.date)),d.widget=e(A(d.options.pickDate,d.options.pickTime,d.options.collapse)).appendTo("body"),d.minViewMode=d.options.minViewMode||d.element.data("date-minviewmode")||0,"string"==typeof d.minViewMode)switch(d.minViewMode){case"months":d.minViewMode=1;break;case"years":d.minViewMode=2;break;default:d.minViewMode=0}if(d.viewMode=d.options.viewMode||d.element.data("date-viewmode")||0,"string"==typeof d.viewMode)switch(d.viewMode){case"months":d.viewMode=1;break;case"years":d.viewMode=2;break;default:d.viewMode=0}for(r=0;r<d.options.disabledDates.length;r++)p=d.options.disabledDates[r],p=a(p),p.isValid()||(p=a(d.options.startDate).subtract(1,"day")),d.options.disabledDates[r]=p.format("L");for(r=0;r<d.options.enabledDates.length;r++)p=d.options.enabledDates[r],p=a(p),p.isValid()||(p=a(d.options.startDate).subtract(1,"day")),d.options.enabledDates[r]=p.format("L");d.startViewMode=d.viewMode,d.setStartDate(d.options.startDate||d.element.data("date-startdate")),d.setEndDate(d.options.endDate||d.element.data("date-enddate")),f(),h(),w(),v(),k(),u(),x(),C(),""!==d.options.defaultDate&&d.setValue(d.options.defaultDate)},c=function(){var e=d.element.data();void 0!==e.pickdate&&(d.options.pickDate=e.pickdate),void 0!==e.picktime&&(d.options.pickTime=e.picktime),void 0!==e.useminutes&&(d.options.useMinutes=e.useminutes),void 0!==e.useseconds&&(d.options.useSeconds=e.useseconds),void 0!==e.minutestepping&&(d.options.minuteStepping=e.minutestepping),void 0!==e.startdate&&(d.options.startDate=e.startdate),void 0!==e.enddate&&(d.options.endDate=e.enddate),void 0!==e.collapse&&(d.options.collapse=e.collapse),void 0!==e.language&&(d.options.language=e.language),void 0!==e.defaultdate&&(d.options.defaultDate=e.defaultdate),void 0!==e.disableddates&&(d.options.disabledDates=e.disableddates),void 0!==e.enableddates&&(d.options.enabledDates=e.enableddates),void 0!==e.icons&&(d.options.icons=e.icons),void 0!==e.usestrict&&(d.options.useStrict=e.usestrict)},p=function(){var t="absolute",i=d.component?d.component.offset():d.element.offset(),a=e(window);d.width=d.component?d.component.outerWidth():d.element.outerWidth(),i.top=i.top+d.element.outerHeight(),void 0!==d.options.width&&d.widget.width(d.options.width),"left"===d.options.orientation&&(d.widget.addClass("left-oriented"),i.left=i.left-d.widget.width()+20),I()&&(t="fixed",i.top-=a.scrollTop(),i.left-=a.scrollLeft()),a.width()<i.left+d.widget.outerWidth()?(i.right=a.width()-i.left-d.width,i.left="auto",d.widget.addClass("pull-right")):(i.right="auto",d.widget.removeClass("pull-right")),d.widget.css({position:t,top:i.top,left:i.left,right:i.right})},l=function(e,t){d.element.trigger({type:"change.dp",date:a(d.date),oldDate:a(e)}),"change"!==t&&d.element.change()},m=function(e){d.element.trigger({type:"error.dp",date:a(e)})},u=function(e){a.lang(d.options.language);var t=e;t||(t=d.isInput?d.element.val():d.element.find("input").val(),t&&(d.date=a(t,d.format,d.options.useStrict)),d.date||(d.date=a())),d.viewDate=a(d.date).startOf("month"),g(),b()},f=function(){a.lang(d.options.language);var t,i=e("<tr>"),n=a.weekdaysMin();if(0==a()._lang._week.dow)for(t=0;7>t;t++)i.append('<th class="dow">'+n[t]+"</th>");else for(t=1;8>t;t++)7==t?i.append('<th class="dow">'+n[0]+"</th>"):i.append('<th class="dow">'+n[t]+"</th>");d.widget.find(".datepicker-days thead").append(i)},h=function(){a.lang(d.options.language);for(var e="",t=0,i=a.monthsShort();12>t;)e+='<span class="month">'+i[t++]+"</span>";d.widget.find(".datepicker-months td").append(e)},g=function(){a.lang(d.options.language);var t,i,n,o,s,r,c,p,l=d.viewDate.year(),m=d.viewDate.month(),u=d.options.startDate.year(),f=d.options.startDate.month(),h=d.options.endDate.year(),g=d.options.endDate.month(),w=[],v=a.months();for(d.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),d.widget.find(".datepicker-days th:eq(1)").text(v[m]+" "+l),t=a(d.viewDate).subtract("months",1),r=t.daysInMonth(),t.date(r).startOf("week"),(l==u&&f>=m||u>l)&&d.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(l==h&&m>=g||l>h)&&d.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),i=a(t).add(42,"d");t.isBefore(i);)t.weekday()===a().startOf("week").weekday()&&(n=e("<tr>"),w.push(n)),o="",t.year()<l||t.year()==l&&t.month()<m?o+=" old":(t.year()>l||t.year()==l&&t.month()>m)&&(o+=" new"),t.isSame(a({y:d.date.year(),M:d.date.month(),d:d.date.date()}))&&(o+=" active"),(a(t).add(1,"d")<=d.options.startDate||t>d.options.endDate||j(t)||!N(t))&&(o+=" disabled"),n.append('<td class="day'+o+'">'+t.date()+"</td>"),t.add(1,"d");for(d.widget.find(".datepicker-days tbody").empty().append(w),p=a().year(),v=d.widget.find(".datepicker-months").find("th:eq(1)").text(l).end().find("span").removeClass("active"),p===l&&v.eq(a().month()).addClass("active"),u>p-1&&d.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),p+1>h&&d.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),s=0;12>s;s++)l==u&&f>s||u>l?e(v[s]).addClass("disabled"):(l==h&&s>g||l>h)&&e(v[s]).addClass("disabled");for(w="",l=10*parseInt(l/10,10),c=d.widget.find(".datepicker-years").find("th:eq(1)").text(l+"-"+(l+9)).end().find("td"),d.widget.find(".datepicker-years").find("th").removeClass("disabled"),u>l&&d.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),l+9>h&&d.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),l-=1,s=-1;11>s;s++)w+='<span class="year'+(-1===s||10===s?" old":"")+(p===l?" active":"")+(u>l||l>h?" disabled":"")+'">'+l+"</span>",l+=1;c.html(w)},w=function(){a.lang(d.options.language);var e,t,i,n=d.widget.find(".timepicker .timepicker-hours table"),o="";if(n.parent().hide(),d.options.use24hours)for(e=0,t=0;6>t;t+=1){for(o+="<tr>",i=0;4>i;i+=1)o+='<td class="hour">'+E(e.toString())+"</td>",e++;o+="</tr>"}else for(e=1,t=0;3>t;t+=1){for(o+="<tr>",i=0;4>i;i+=1)o+='<td class="hour">'+E(e.toString())+"</td>",e++;o+="</tr>"}n.html(o)},v=function(){var e,t,i=d.widget.find(".timepicker .timepicker-minutes table"),a="",n=0;for(i.parent().hide(),e=0;5>e;e++){for(a+="<tr>",t=0;4>t;t+=1)a+='<td class="minute">'+E(n.toString())+"</td>",n+=3;a+="</tr>"}i.html(a)},k=function(){var e,t,i=d.widget.find(".timepicker .timepicker-seconds table"),a="",n=0;for(i.parent().hide(),e=0;5>e;e++){for(a+="<tr>",t=0;4>t;t+=1)a+='<td class="second">'+E(n.toString())+"</td>",n+=3;a+="</tr>"}i.html(a)},b=function(){if(d.date){var e=d.widget.find(".timepicker span[data-time-component]"),t=d.date.hours(),i="AM";d.options.use24hours||(t>=12&&(i="PM"),0===t?t=12:12!=t&&(t%=12),d.widget.find(".timepicker [data-action=togglePeriod]").text(i)),e.filter("[data-time-component=hours]").text(E(t)),e.filter("[data-time-component=minutes]").text(E(d.date.minutes())),e.filter("[data-time-component=seconds]").text(E(d.date.second()))}},y=function(t){t.stopPropagation(),t.preventDefault(),d.unset=!1;var i,n,o,s,r=e(t.target).closest("span, td, th"),c=a(d.date);if(1===r.length&&!r.is(".disabled"))switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"switch":x(1);break;case"prev":case"next":o=F.modes[d.viewMode].navStep,"prev"===r[0].className&&(o=-1*o),d.viewDate.add(o,F.modes[d.viewMode].navFnc),g()}break;case"span":r.is(".month")?(i=r.parent().find("span").index(r),d.viewDate.month(i)):(n=parseInt(r.text(),10)||0,d.viewDate.year(n)),0!==d.viewMode&&(d.date=a({y:d.viewDate.year(),M:d.viewDate.month(),d:d.viewDate.date(),h:d.date.hours(),m:d.date.minutes()}),l(c,t.type)),x(-1),g();break;case"td":r.is(".day")&&(s=parseInt(r.text(),10)||1,i=d.viewDate.month(),n=d.viewDate.year(),r.is(".old")?0===i?(i=11,n-=1):i-=1:r.is(".new")&&(11==i?(i=0,n+=1):i+=1),d.date=a({y:n,M:i,d:s,h:d.date.hours(),m:d.date.minutes()}),d.viewDate=a({y:n,M:i,d:Math.min(28,s)}),g(),H(),l(c,t.type))}},D={incrementHours:function(){L("add","hours",1)},incrementMinutes:function(){L("add","minutes",d.options.minuteStepping)},incrementSeconds:function(){L("add","seconds",1)},decrementHours:function(){L("subtract","hours",1)},decrementMinutes:function(){L("subtract","minutes",d.options.minuteStepping)},decrementSeconds:function(){L("subtract","seconds",1)},togglePeriod:function(){var e=d.date.hours();e>=12?e-=12:e+=12,d.date.hours(e)},showPicker:function(){d.widget.find(".timepicker > div:not(.timepicker-picker)").hide(),d.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){d.widget.find(".timepicker .timepicker-picker").hide(),d.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){d.date.hours(parseInt(e(t.target).text(),10)),D.showPicker.call(d)},selectMinute:function(t){d.date.minutes(parseInt(e(t.target).text(),10)),D.showPicker.call(d)},selectSecond:function(t){d.date.seconds(parseInt(e(t.target).text(),10)),D.showPicker.call(d)}},M=function(t){var i=a(d.date),n=e(t.currentTarget).data("action"),o=D[n].apply(d,arguments);return S(t),d.date||(d.date=a({y:1970})),H(),b(),l(i,t.type),o},S=function(e){e.stopPropagation(),e.preventDefault()},T=function(t){a.lang(d.options.language);var i=e(t.target),n=a(d.date),o=a(i.val(),d.format,d.options.useStrict);o.isValid()?(u(),d.setValue(o),l(n,t.type),H()):(d.viewDate=n,l(n,t.type),m(o),d.unset=!0,i.val(""))},x=function(e){e&&(d.viewMode=Math.max(d.minViewMode,Math.min(2,d.viewMode+e))),d.widget.find(".datepicker > div").hide().filter(".datepicker-"+F.modes[d.viewMode].clsName).show()},C=function(){var t,i,a,n,o;d.widget.on("click",".datepicker *",e.proxy(y,this)),d.widget.on("click","[data-action]",e.proxy(M,this)),d.widget.on("mousedown",e.proxy(S,this)),d.options.pickDate&&d.options.pickTime&&d.widget.on("click.togglePicker",".accordion-toggle",function(s){if(s.stopPropagation(),t=e(this),i=t.closest("ul"),a=i.find(".in"),n=i.find(".collapse:not(.in)"),a&&a.length){if(o=a.data("collapse"),o&&o.transitioning)return;a.collapse("hide"),n.collapse("show"),t.find("span").toggleClass(d.options.icons.time+" "+d.options.icons.date),d.element.find(".input-group-addon span").toggleClass(d.options.icons.time+" "+d.options.icons.date)}}),d.isInput?d.element.on({focus:e.proxy(d.show,this),change:e.proxy(T,this),blur:e.proxy(d.hide,this)}):(d.element.on({change:e.proxy(T,this)},"input"),d.component?d.component.on("click",e.proxy(d.show,this)):d.element.on("click",e.proxy(d.show,this)))},V=function(){e(window).on("resize.datetimepicker"+d.id,e.proxy(p,this)),d.isInput||e(document).on("mousedown.datetimepicker"+d.id,e.proxy(d.hide,this))},q=function(){d.widget.off("click",".datepicker *",d.click),d.widget.off("click","[data-action]"),d.widget.off("mousedown",d.stopEvent),d.options.pickDate&&d.options.pickTime&&d.widget.off("click.togglePicker"),d.isInput?d.element.off({focus:d.show,change:d.change}):(d.element.off({change:d.change},"input"),d.component?d.component.off("click",d.show):d.element.off("click",d.show))},P=function(){e(window).off("resize.datetimepicker"+d.id),d.isInput||e(document).off("mousedown.datetimepicker"+d.id)},I=function(){if(d.element){var t,i=d.element.parents(),a=!1;for(t=0;t<i.length;t++)if("fixed"==e(i[t]).css("position")){a=!0;break}return a}return!1},H=function(){a.lang(d.options.language);var e,t="";d.unset||(t=a(d.date).format(d.format)),d.isInput?d.element.val(t):(d.component&&(e=d.element.find("input"),e.val(t)),d.element.data("date",t)),d.options.pickTime||d.hide()},L=function(e,t,i){a.lang(d.options.language);var n;return"add"==e?(n=a(d.date),23==n.hours()&&n.add(i,t),n.add(i,t)):n=a(d.date).subtract(i,t),n.isAfter(d.options.endDate)||a(n.subtract(i,t)).isBefore(d.options.startDate)||j(n)?(m(n.format(d.format)),void 0):("add"==e?d.date.add(i,t):d.date.subtract(i,t),void 0)},j=function(e){a.lang(d.options.language);var t,i=d.options.disabledDates;for(t in i)if(i[t]==a(e).format("L"))return!0;return!1},N=function(e){a.lang(d.options.language);var t,i=d.options.enabledDates;if(i.length){for(t in i)if(i[t]==a(e).format("L"))return!0;return!1}return i===!1?!0:!1},E=function(e){return e=e.toString(),e.length>=2?e:"0"+e},A=function(e,t,i){return e&&t?'<div class="bootstrap-datetimepicker-widget dropdown-menu" style="z-index:9999 !important;"><ul class="list-unstyled"><li'+(i?' class="collapse in"':"")+'><div class="datepicker">'+F.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+d.options.icons.time+'"></span></a></li><li'+(i?' class="collapse"':"")+'><div class="timepicker">'+O.getTemplate()+"</div></li></ul></div>":t?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+O.getTemplate()+"</div></div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+F.template+"</div></div>"},F={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},O={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};F.template='<div class="datepicker-days"><table class="table-condensed">'+F.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+F.headTemplate+F.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+F.headTemplate+F.contTemplate+"</table></div>",O.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+d.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(d.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+d.options.icons.up+'"></span></a>':"")+"</td>"+(d.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+d.options.icons.up+'"></span></a></td>':"")+(d.options.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+O.hourTemplate+'</td> <td class="separator">:</td><td>'+(d.options.useMinutes?O.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(d.options.useSeconds?'<td class="separator">:</td><td>'+O.secondTemplate+"</td>":"")+(d.options.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+d.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(d.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+d.options.icons.down+'"></span></a>':"")+"</td>"+(d.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+d.options.icons.down+'"></span></a></td>':"")+(d.options.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(d.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':"")},d.destroy=function(){q(),P(),d.widget.remove(),d.element.removeData("DateTimePicker"),d.component&&d.component.removeData("DateTimePicker")},d.show=function(e){d.widget.show(),d.height=d.component?d.component.outerHeight():d.element.outerHeight(),p(),d.element.trigger({type:"show.dp",date:a(d.date)}),V(),e&&S(e)},d.disable=function(){var e=d.element.find("input");e.prop("disabled")&&(e.prop("disabled",!0),q())},d.enable=function(){var e=d.element.find("input");e.prop("disabled")&&(e.prop("disabled",!0),C())},d.hide=function(t){if(!t||!e(t.target).is(d.element.attr("id"))){var i,n,o=d.widget.find(".collapse");for(i=0;i<o.length;i++)if(n=o.eq(i).data("collapse"),n&&n.transitioning)return;d.widget.hide(),d.viewMode=d.startViewMode,x(),d.element.trigger({type:"hide.dp",date:a(d.date)}),P()}},d.setValue=function(e){a.lang(d.options.language),d.unset=e?!1:!0,a.isMoment(e)||(e=a(e)),e.isValid()?(d.date=e,H(),d.viewDate=a({y:d.date.year(),M:d.date.month()}),g(),b()):m(e)},d.getDate=function(){return d.unset?null:d.date},d.setDate=function(e){e=a(e),e?d.setValue(e):d.setValue(null)},d.setEnabledDates=function(e){d.options.enabledDates=e?e:!1,d.viewDate&&u()},d.setEndDate=function(e){d.options.endDate=a(e),d.options.endDate.isValid()||(d.options.endDate=a().add(50,"y")),d.viewDate&&u()},d.setStartDate=function(e){d.options.startDate=a(e),d.options.startDate.isValid()||(d.options.startDate=a({y:1970})),d.viewDate&&u()},r()};e.fn.datetimepicker=function(t){return this.each(function(){var i=e(this),a=i.data("DateTimePicker");a||i.data("DateTimePicker",new n(this,t))})}});